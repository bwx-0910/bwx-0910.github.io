# GitHub Actions 自动化说明

## 🤖 自动构建功能

这个工作流会在你用 admin.html 保存笔记后**自动运行**！

## 📋 工作流程

```
1. 你在 admin.html 编辑笔记
   ↓
2. 点击"保存" - .md 文件上传到 GitHub
   ↓
3. GitHub Actions 检测到 notes/ 文件夹变化
   ↓
4. 自动运行 build.py
   ↓
5. 自动生成新的 data.js
   ↓
6. 自动提交并推送
   ↓
7. GitHub Pages 自动部署
   ↓
8. 完成！不需要任何手动操作！✨
```

## 🎯 优势

### 之前（需要手动）

```
admin.html 保存
  ↓
回到电脑
  ↓
运行 sync-and-publish.bat
  ↓
完成
```

### 现在（完全自动）

```
admin.html 保存
  ↓
等待 2-3 分钟
  ↓
自动完成！
```

## 📊 触发条件

工作流会在以下情况自动运行：

- ✅ 在 admin.html 中保存笔记
- ✅ 修改 notes 文件夹中的任何 .md 文件
- ✅ 添加新的 .md 文件
- ✅ 删除 .md 文件

## 🔍 查看运行状态

访问：https://github.com/bwx-0910/bwx-0910.github.io/actions

可以看到：
- 🟡 黄色圆点 = 正在运行
- ✅ 绿色勾 = 成功完成
- ❌ 红叉 = 失败（很少见）

## ⏱️ 需要多久？

- 检测到变化：立即
- 运行构建：约 30-60 秒
- GitHub Pages 部署：1-2 分钟
- **总共约 2-3 分钟**

## 💡 使用方法

### 现在的工作流程

```
1. 打开 https://bwx-0910.github.io/admin.html
2. 编辑或新建笔记
3. 点击"保存"
4. 完成！等待 2-3 分钟自动部署
5. 刷新博客（Ctrl + F5）
```

**就这么简单！** 🎉

## 🔧 技术细节

### 文件位置

```
.github/
└── workflows/
    └── auto-build.yml  ← 自动化配置
```

### 工作流步骤

1. **检出代码** - 获取最新代码
2. **设置 Python** - 准备 Python 环境
3. **安装依赖** - 安装 python-dotenv
4. **构建 data.js** - 运行 build.py
5. **提交更改** - 自动提交 data.js
6. **完成** - 触发 GitHub Pages 部署

### 为什么加 [skip ci]？

在提交信息中加 `[skip ci]` 可以防止无限循环：

```
保存笔记 → 构建 data.js → 提交 data.js
                    ↓
            不会再次触发构建 ✅
```

## 🆘 故障排除

### 如果自动构建失败

1. 访问：https://github.com/bwx-0910/bwx-0910.github.io/actions
2. 点击失败的工作流
3. 查看错误信息
4. 通常是：
   - Python 依赖问题
   - .md 文件格式错误
   - build.py 脚本问题

### 手动触发

如果需要手动触发构建：

```bash
cd D:\wangye\blog
sync-and-publish.bat
```

## 📝 本地开发

本地编辑时：

```bash
# 方法 1：让它自动构建
git add notes/新笔记.md
git commit -m "添加新笔记"
git push
# GitHub Actions 会自动构建

# 方法 2：本地构建
publish.bat
```

## ⚡ 性能

- 非常快：30-60 秒完成
- 不占用本地资源
- 完全在云端运行

## 🎊 好处

1. ✅ **完全自动化** - 不需要记得运行脚本
2. ✅ **随时随地** - 手机编辑也能自动构建
3. ✅ **永不遗忘** - 每次保存都会自动处理
4. ✅ **云端运行** - 不占用本地电脑
5. ✅ **免费** - GitHub Actions 免费额度足够用

## 🔮 未来可以扩展

可以添加更多自动化：

- 🔍 自动检查 Markdown 格式
- 📸 自动优化图片
- 🏷️ 自动生成标签云
- 📊 自动生成统计报告
- 🔔 构建完成后发送通知

---

**现在你可以专注于写作，其他的交给自动化！** 🚀
